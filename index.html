<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Houdini Lyrics Player Test</title>
<style>
body{font-family:"Inter",sans-serif;background:#0f4f54;color:#fff;margin:0;padding:20px;}
h2{text-align:center;}
#lyrics-wrap { max-height:400px; overflow:auto; margin:20px 0; font-size:1.1rem; line-height:1.5; border-radius:12px; padding:10px; background:rgba(0,0,0,0.25);}
.lyric-line { padding:8px; color:#aaa; transition:all .18s; border-radius:6px; }
.lyric-line.active { background:linear-gradient(90deg,#40E0D0,#0f4f54); color:#000; font-weight:900; transform:scale(1.02);}
button { padding:10px 15px; font-size:1rem; margin:5px; cursor:pointer; border:none; border-radius:8px; background:#40E0D0; color:#000; font-weight:700;}
button:hover { background:#32cfcf; }
#mini-player{position:fixed;left:12px;right:12px;bottom:12px;background:linear-gradient(90deg,#40E0D0,#0f4f54);padding:12px;border-radius:12px;display:flex;align-items:center;justify-content:space-between;gap:12px;box-shadow:0 12px 36px rgba(0,0,0,.5);z-index:1500;}
.mini-left{display:flex;align-items:center;gap:12px}
.mini-cover{width:66px;height:66px;border-radius:8px;object-fit:cover;box-shadow:0 8px 24px rgba(0,0,0,.4);}
.mini-meta{overflow:hidden;min-width:0;}
.mini-title{font-weight:800;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:260px;}
.mini-time{color:#fff;font-size:0.9rem;font-weight:600;margin-right:8px;}
</style>
</head>
<body>

<h2>Houdini — Lyrics Simulation</h2>

<div id="lyrics-wrap">
  <!-- Intro -->
  <div class="lyric-line" data-time="0">Okay</div>
  <div class="lyric-line" data-time="1.5">Mm, ah</div>
  <!-- Chorus -->
  <div class="lyric-line" data-time="3">I come and I go</div>
  <div class="lyric-line" data-time="5">Tell me all the ways you need me</div>
  <div class="lyric-line" data-time="8">I'm not here for long</div>
  <div class="lyric-line" data-time="10.5">Catch me or I go Houdini</div>
  <div class="lyric-line" data-time="13">I come and I go</div>
  <div class="lyric-line" data-time="15.5">Prove you got the right to please me</div>
  <div class="lyric-line" data-time="18">Everybody knows</div>
  <div class="lyric-line" data-time="20.5">Catch me or I go Houdini</div>
  <!-- Verse 1 -->
  <div class="lyric-line" data-time="23">Time is passin' like a solar eclipse</div>
  <div class="lyric-line" data-time="25">See you watchin' and you blow me a kiss</div>
  <div class="lyric-line" data-time="27.5">It's your moment, baby, don't let it slip</div>
  <div class="lyric-line" data-time="30">Come in closer, are you readin' my lips?</div>
  <!-- Chorus 2 -->
  <div class="lyric-line" data-time="33">They say I come and I go</div>
  <div class="lyric-line" data-time="35">Tell me all the ways you need me</div>
  <div class="lyric-line" data-time="38">I'm not here for long</div>
  <div class="lyric-line" data-time="40.5">Catch me or I go Houdini</div>
  <div class="lyric-line" data-time="43">I come and I go</div>
  <div class="lyric-line" data-time="45.5">Prove you got the right to please me</div>
  <div class="lyric-line" data-time="48">Everybody knows</div>
  <div class="lyric-line" data-time="50.5">Catch me or I go Houdini</div>
  <!-- Post-Chorus -->
  <div class="lyric-line" data-time="53">If you're good enough, you'll find the way</div>
  <div class="lyric-line" data-time="55">Maybe you could cause a girl to change (Her ways)</div>
  <div class="lyric-line" data-time="57.5">Do you think about it night and day?</div>
  <div class="lyric-line" data-time="60">Maybe you could be the one to make me stay</div>
  <!-- Verse 2 -->
  <div class="lyric-line" data-time="63">Everything you say is soundin' so sweet (Ah-ah)</div>
  <div class="lyric-line" data-time="65">But do you practise everything that you preach? (Ah-ah)</div>
  <div class="lyric-line" data-time="67.5">I need something that'll make me believe (Ah-ah)</div>
  <div class="lyric-line" data-time="70">If you got it, baby, give it to me</div>
  <!-- Chorus 3 -->
  <div class="lyric-line" data-time="73">They say I come and I go</div>
  <div class="lyric-line" data-time="75">Tell me all the ways you need me</div>
  <div class="lyric-line" data-time="78">I'm not here for long</div>
  <div class="lyric-line" data-time="80.5">Catch me or I go Houdini</div>
  <div class="lyric-line" data-time="83">I come and I go (I come and I go)</div>
  <div class="lyric-line" data-time="85.5">Prove you got the right to please me</div>
  <div class="lyric-line" data-time="88">Everybody knows (I'm not here for long)</div>
  <div class="lyric-line" data-time="90.5">Catch me or I go Houdini</div>
  <!-- Bridge -->
  <div class="lyric-line" data-time="93">Oh-oh</div>
  <div class="lyric-line" data-time="95">Ooh</div>
  <!-- Chorus 4 -->
  <div class="lyric-line" data-time="97">I come and I go</div>
  <div class="lyric-line" data-time="99">Tell me all the ways you need me (Ooh)</div>
  <div class="lyric-line" data-time="102">I'm not here for long</div>
  <div class="lyric-line" data-time="104.5">Catch me or I go Houdini</div>
  <div class="lyric-line" data-time="107">I come and I go (I come and I go)</div>
  <div class="lyric-line" data-time="109.5">Prove you got the right to please me</div>
  <div class="lyric-line" data-time="112">Everybody knows (I'm not here for long)</div>
  <div class="lyric-line" data-time="114.5">Catch me or I go Houdini</div>
  <!-- Outro -->
  <div class="lyric-line" data-time="117">Houdini (Ah)</div>
  <div class="lyric-line" data-time="119">Catch me or I go Houdini</div>
</div>

<button id="start">Start Simulation</button>
<button id="reset">Reset</button>

<div id="mini-player">
  <div class="mini-left">
    <img class="mini-cover" src="radical_optimism.jpg" alt="cover">
    <div class="mini-meta">
      <div class="mini-title">Houdini</div>
      <div class="mini-time">0:00 / 2:00</div>
    </div>
  </div>
  <div class="mini-controls">
    <button id="mini-play">▶</button>
  </div>
</div>

<script>
const lyricNodes = Array.from(document.querySelectorAll('.lyric-line'));
let fakeTime = 0;
let interval;

function updateLyrics(now) {
  let active = -1;
  lyricNodes.forEach((line, idx) => {
    const t = parseFloat(line.dataset.time);
    if (now >= t) active = idx;
  });
  lyricNodes.forEach((line, idx) => {
    if (idx === active) {
      if (!line.classList.contains('active')) {
        line.classList.add('active');
        const wrap = document.getElementById('lyrics-wrap');
        const wrapRect = wrap.getBoundingClientRect();
        const lineRect = line.getBoundingClientRect();
        const offset = lineRect.top - wrapRect.top - (wrapRect.height/2) + (lineRect.height/2);
        wrap.scrollBy({ top: offset, behavior: 'smooth' });
      }
    } else line.classList.remove('active');
  });

  // Aktualizace mini-player času
  const miniTime = document.querySelector('.mini-time');
  let total = 120; // simulovaný celkový čas
  const cur = Math.min(now, total);
  const formatTime = t => Math.floor(t/60)+":"+(Math.floor(t%60)<10?"0"+Math.floor(t%60):Math.floor(t%60));
  miniTime.textContent = `${formatTime(cur)} / ${formatTime(total)}`;
}

document.getElementById('start').addEventListener('click', () => {
  if(interval) clearInterval(interval);
  fakeTime = 0;
  interval = setInterval(() => {
    updateLyrics(fakeTime);
    fakeTime += 0.2;
    if(fakeTime > 120) clearInterval(interval);
  }, 200);
});

document.getElementById('reset').addEventListener('click', () => {
  clearInterval(interval);
  fakeTime = 0;
  lyricNodes.forEach(line => line.classList.remove('active'));
  document.querySelector('.mini-time').textContent="0:00 / 2:00";
});

document.getElementById('mini-play').addEventListener('click', () => {
  if(interval) { clearInterval(interval); interval=null; document.getElementById('mini-play').textContent='▶'; }
  else document.getElementById('start').click();
});
</script>

</body>
</html>
